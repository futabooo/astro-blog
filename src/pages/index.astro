---
import BlogListItemSmall from "@components/BlogListItemSmall";
import Page from "@layouts/Page";
import { getCollection } from "astro:content";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";

const posts = (await getCollection("blog"))
  .sort((a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf())
  .reverse()
  .slice(0, 3);
---

<Page title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <div class="mb-16">
    <h1 class="text-3xl font-bold mb-4">Hi, I'm futabooo!!</h1>
    <p>
      Welcome to my personal site.🏡
      <br />
      <br />
      株式会社10Xで働くソフトウェアエンジニアです。仕事ではコードを書くことを中心としてチームビルディングやプロセスの効率化を行っています。休日は家族と遊んだり、コードを書いたり、フットサルをしたりしています。
    </p>
  </div>
  <div>
    <div class="flex justify-between">
      <h2 class="text-3xl font-bold mb-4">最新の投稿</h2>
      <a href="/blog">
        <button class="btn btn-outline btn-sm">もっとみる</button>
      </a>
    </div>
    <div>
      {
        posts.map((post, index) => (
          <div class="">
            <BlogListItemSmall post={post} />
            {posts.length - 1 > index && <div class="divider m-0" />}
          </div>
        ))
      }
    </div>
  </div>
</Page>
